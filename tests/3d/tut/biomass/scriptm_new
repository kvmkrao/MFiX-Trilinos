parmetis=$HOME/Software/parmetis/install

make 
rm model/solve_lin_eq.o mfixnew FWrapper.o CWrapper.o FWrapper_ext.o mfixnew 
mpif90 -I.    -I./model/include -I./model -J./model   -DMPI  -O3 -ffree-form -ffree-line-length-none -fimplicit-none -cpp -c -o model/solve_lin_eq.o model/solve_lin_eq.f
mpif90 -I.    -I./model/include -I./model -J./model   -DMPI  -O3 -ffree-form -ffree-line-length-none -fimplicit-none -cpp -c -o model/MFIXinterface.o model/MFIXinterface1.f
mpif90 -I.    -I./model/include -I./model -J./model   -DMPI  -O3 -ffree-form -ffree-line-length-none -fimplicit-none -cpp -c -o model/MFIXinterface.o test_wrtmatvec/MFIXinterface2.f
mpif90   -I.    -I./model/include -I./model -J./model   -DMPI  -O3 -ffree-form -ffree-line-length-none -fimplicit-none -cpp -c -o FWrapper.o test_wrtmatvec/FWrapper.f
mpif90   -I.    -I./model/include -I./model -J./model   -DMPI  -O3 -ffree-form -ffree-line-length-none -fimplicit-none -cpp -c -o FWrapper_ext.o test_wrtmatvec/FWrapper_ext.f
rm -f libmfix.a
ar cru libmfix.a model/ODEPACK.o  model/BLAS.o model/DGTSV.o model/GhdTheory/adjust_eps_ghd.o model/GhdTheory/bulk_viscosity.o model/GhdTheory/calc_d_ghd.o model/GhdTheory/calc_external_forces.o model/GhdTheory/calc_nflux.o model/GhdTheory/chi_ij_GHD.o model/GhdTheory/cooling_rate.o model/GhdTheory/cooling_rate_tc.o model/GhdTheory/dufour_coeff.o model/GhdTheory/ghd.o model/GhdTheory/ghdmassflux.o model/GhdTheory/ghdtheory_mod.o model/GhdTheory/mass_mobility.o model/GhdTheory/ordinary_diff.o model/GhdTheory/partial_elim_ghd.o model/GhdTheory/pressure.o model/GhdTheory/shear_viscosity.o model/GhdTheory/source_ghd_granular_energy.o model/GhdTheory/thermal_conductivity.o model/GhdTheory/thermal_diffusivity.o model/GhdTheory/thermal_mobility.o model/GhdTheory/transport_coeff_ghd.o model/accum_resid.o model/adjust_a_u_g.o model/adjust_a_u_s.o model/adjust_a_v_g.o model/adjust_a_v_s.o model/adjust_a_w_g.o model/adjust_a_w_s.o model/adjust_dt_mod.o model/adjust_eps.o model/adjust_leq.o model/adjust_rop.o model/adjust_theta.o model/allocate_arrays.o model/ambm_mod.o model/b_m_p_star.o model/bc_mod.o model/bc_phi.o model/bc_theta.o model/bodyforce_mod.o model/bound_x.o model/boundfunijk3_mod.o model/boundfunijk_mod.o model/cal_d.o model/calc_cell.o model/calc_coeff.o model/calc_d_e.o model/calc_d_n.o model/calc_d_t.o model/calc_dif_g.o model/calc_dif_s.o model/calc_drag.o model/calc_e.o model/calc_gama.o model/calc_grbdry.o model/calc_h.o model/calc_k_cp.o model/calc_k_g.o model/calc_k_s.o model/calc_mflux.o model/calc_mu_g.o model/calc_mu_s.o model/calc_outflow.o model/calc_p_star.o model/calc_resid.o model/calc_s_ddot_s.o model/calc_trd_g.o model/calc_trd_s.o model/calc_u_friction.o model/calc_vol_fr.o model/cartesian_grid/CG_set_bc0.o model/cartesian_grid/CG_set_outflow.o model/cartesian_grid/CG_source_u_g.o model/cartesian_grid/CG_source_u_s.o model/cartesian_grid/CG_source_v_g.o model/cartesian_grid/CG_source_v_s.o model/cartesian_grid/CG_source_w_g.o model/cartesian_grid/CG_source_w_s.o model/cartesian_grid/allocate_cut_cell_arrays.o model/cartesian_grid/allocate_dummy_cut_cell_arrays.o model/cartesian_grid/calc_vort_out.o model/cartesian_grid/cartesian_grid_init_namelist.o model/cartesian_grid/check_data_cartesian.o model/cartesian_grid/cut_cell_preprocessing.o model/cartesian_grid/cutcell_mod.o model/cartesian_grid/dashboard_mod.o model/cartesian_grid/deallocate_cut_cell_arrays.o model/cartesian_grid/define_quadrics.o model/cartesian_grid/dmp_cartesian.o model/cartesian_grid/eval_usr_fct.o model/cartesian_grid/get_alpha.o model/cartesian_grid/get_connectivity.o model/cartesian_grid/get_cut_cell_flags.o model/cartesian_grid/get_cut_cell_volume_area.o model/cartesian_grid/get_delh.o model/cartesian_grid/get_master.o model/cartesian_grid/get_poly_data.o model/cartesian_grid/get_stl_data.o model/cartesian_grid/polygon_mod.o model/cartesian_grid/progress_bar_mod.o model/cartesian_grid/quadric_mod.o model/cartesian_grid/set_Odxyz.o model/cartesian_grid/stl_mod.o model/cartesian_grid/update_dashboard.o model/cartesian_grid/vtk_mod.o model/cartesian_grid/vtk_out.o model/cartesian_grid/write_progress_bar.o model/cdist_mod.o model/check_ab_m.o model/check_bqend.o model/check_convergence.o model/check_data/check_axis.o model/check_data/check_bc_dem.o model/check_data/check_bc_geometry.o model/check_data/check_bc_inflow.o model/check_data/check_bc_outflow.o model/check_data/check_bc_pic.o model/check_data/check_bc_walls.o model/check_data/check_boundary_conditions.o model/check_data/check_chemical_rxns.o model/check_data/check_dmp_prereqs.o model/check_data/check_gas_phase.o model/check_data/check_geometry.o model/check_data/check_geometry_prereqs.o model/check_data/check_ic_common_discrete.o model/check_data/check_ic_dem.o model/check_data/check_ic_mppic.o model/check_data/check_initial_conditions.o model/check_data/check_internal_surfaces.o model/check_data/check_numerics.o model/check_data/check_odepack_stiff_chem.o model/check_data/check_output_control.o model/check_data/check_point_sources.o model/check_data/check_run_control.o model/check_data/check_solids_common_all.o model/check_data/check_solids_common_discrete.o model/check_data/check_solids_continuum.o model/check_data/check_solids_dem.o model/check_data/check_solids_model_prereqs.o model/check_data/check_solids_mppic.o model/check_data/check_solids_phases.o model/check_data_20.o model/check_data_30.o model/check_mass_balance.o model/check_mod.o model/check_plane.o model/chem/stiff_chem_dbg_mod.o model/chem/stiff_chem_maps_mod.o model/chem/stiff_chem_mod.o model/chem/stiff_chem_rrates.o model/chem/stiff_chem_stats_mod.o model/chischeme_mod.o model/cn_extrapol.o model/coeff_mod.o model/constant_mod.o model/cont_mod.o model/conv_dif_phi.o model/conv_dif_u_g.o model/conv_dif_u_s.o model/conv_dif_v_g.o model/conv_dif_v_s.o model/conv_dif_w_g.o model/conv_dif_w_s.o model/conv_pp_g.o model/conv_rop.o model/conv_rop_g.o model/conv_rop_s.o model/conv_source_epp.o model/copy_a.o model/corner.o model/corner_mod.o model/correct_0.o model/correct_1.o model/dbg_mod.o model/deprecated.o model/des/calc_collision_wall_mod.o model/des/calc_drag_des.o model/des/calc_dtpic.o model/des/calc_epg_des.o model/des/calc_force_dem.o model/des/calc_grad_des.o model/des/calc_interp_weights.o model/des/calc_pg_grad.o model/des/calc_rrate_des.o model/des/calc_thermo_des.o model/des/cfassign.o model/des/cffctowall.o model/des/cfnewvalues.o model/des/cfrelvel.o model/des/cfslide.o model/des/cfupdateold.o model/des/cfwallcontact.o model/des/cfwallposvel.o model/des/check_cell_movement.o model/des/comp_mean_fields.o model/des/comp_mean_fields0.o model/des/comp_mean_fields1.o model/des/des_allocate_mod.o model/des/des_bc_mod.o model/des/des_cluster_mod.o model/des/des_functions.o model/des/des_granular_temperature.o model/des/des_init_arrays.o model/des/des_init_namelist.o model/des/des_physical_prop.o model/des/des_reaction_model.o model/des/des_rrates0.o model/des/des_rxns_mod.o model/des/des_stl_functions_mod.o model/des/des_thermo_cond_mod.o model/des/des_thermo_conv.o model/des/des_thermo_mod.o model/des/des_thermo_newvalues.o model/des/des_thermo_rad.o model/des/des_time_march.o model/des/desgrid_mod.o model/des/desmpi_mod.o model/des/desmpi_wrapper_mod.o model/des/dif_phi_bc_des.o model/des/dif_phi_des.o model/des/dif_phi_source_des.o model/des/diffuse_mean_fields.o model/des/discretelement_mod.o model/des/drag_gp_des.o model/des/drag_gs_des0.o model/des/drag_gs_des1.o model/des/drag_ss_dem_noninterp.o model/des/gas_drag.o model/des/generate_particles_mod.o model/des/init_settling_dem.o model/des/interpolation_mod.o model/des/layout_mi_dem.o model/des/make_arrays_des.o model/des/mass_inflow_dem.o model/des/mass_outflow_dem.o model/des/mfix_pic_mod.o model/des/mpi_comm_des_mod.o model/des/mpi_funs_des_mod.o model/des/mpi_init_des_mod.o model/des/mpi_node_des_mod.o model/des/mpi_pack_des_mod.o model/des/mpi_unpack_des_mod.o model/des/neighbour.o model/des/nsquare.o model/des/particle_filter_mod.o model/des/particles_in_cell.o model/des/pic_bc_mod.o model/des/pic_bc_routines.o model/des/pic_routines.o model/des/randomno_mod.o model/des/read_particle_input.o model/des/read_res0_des.o model/des/read_res1_des_mod.o model/des/sendrecvnode_mod.o model/des/set_bc_dem.o model/des/set_bc_dem_mi.o model/des/set_bc_dem_mo.o model/des/set_bc_pic.o model/des/set_bc_pic_mi.o model/des/set_bc_pic_mo.o model/des/set_filter_des.o model/des/set_geometry_des.o model/des/set_ic_dem.o model/des/set_phase_index.o model/des/solid_drag.o model/des/stl_preproc_des_mod.o model/des/usr0_des.o model/des/usr1_des.o model/des/usr2_des.o model/des/usr3_des.o model/des/usr4_des.o model/des/usr_rates_des.o model/des/vtp_mod.o model/des/write_des_data.o model/des/write_res0_des.o model/des/write_res1_des_mod.o model/dgtsl.o model/dif_u_is.o model/dif_v_is.o model/dif_w_is.o model/discretization_mod.o model/display_resid.o model/dmp_modules/compar_mod.o model/dmp_modules/dbg_util_mod.o model/dmp_modules/debug_mod.o model/dmp_modules/gridmap_mod.o model/dmp_modules/mpi_mod.o model/dmp_modules/mpi_utility_mod.o model/dmp_modules/parallel_mpi_mod.o model/dmp_modules/sendrecv3_mod.o model/dmp_modules/sendrecv_mod.o model/dqmom/gaussj.o model/dqmom/odeint.o model/dqmom/rkck.o model/dqmom/rkqs.o model/dqmom/source_population_eq.o model/dqmom/usr_dqmom.o model/drag_gs.o model/drag_mod.o model/drag_ss.o model/energy_mod.o model/eos_mod.o model/equal.o model/error_manager_mod.o model/error_routine.o model/exchange.o model/exit.o model/fldvar_mod.o model/flow_to_vel.o model/fun_avg_mod.o model/function3_mod.o model/functions_mod.o model/funits_mod.o model/geometry_mod.o model/get_bc_area.o model/get_data.o model/get_eq.o model/get_flow_bc.o model/get_hloss.o model/get_is.o model/get_philoss.o model/get_ps.o model/get_smass.o model/get_stats.o model/get_walls_bc.o model/ic_mod.o model/in_binary_512_mod.o model/in_binary_512i_mod.o model/indices_mod.o model/init_ab_m.o model/init_fvars.o model/init_namelist.o model/init_resid.o model/interactive_mod.o model/is_mod.o model/iterate.o model/k_epsilon_prop.o model/kintheory_mod.o model/kintheory_u_s.o model/kintheory_v_s.o model/kintheory_w_s.o model/leq_bicgs.o model/leq_bicgst.o model/leq_cg.o model/leq_gmres.o model/leq_sor.o model/leqsol_mod.o model/line_too_big.o model/location_check.o model/machine_mod.o model/make_upper_case.o model/mark_phase_4_cor.o model/matrix_mod.o model/mfix.o model/mfix_netcdf_mod.o model/mflux_mod.o model/mms_mod.o model/mod_bc_i.o model/mod_bc_j.o model/mod_bc_k.o model/open_file.o model/open_files.o model/out_array.o model/out_array_c.o model/out_array_k.o model/out_array_kc.o model/out_bin_512.o model/out_bin_512i.o model/out_bin_512r.o model/out_bin_r.o model/output_manager.o model/output_mod.o model/parallel_mod.o model/param1_mod.o model/param_mod.o model/parse_line.o model/parse_mod.o model/parse_resid_string.o model/parse_rxn.o model/partial_elim.o model/pgcor_mod.o model/physical_prop.o model/physprop_mod.o model/ps_mod.o model/pscor_mod.o model/qmomk/qmom_kinetic_equation_mod.o model/qmomk/qmomk_allocate_arrays.o model/qmomk/qmomk_bc_mod.o model/qmomk/qmomk_collision_mod.o model/qmomk/qmomk_fluxes_mod.o model/qmomk/qmomk_gas_drag.o model/qmomk/qmomk_init_bc.o model/qmomk/qmomk_init_namelist.o model/qmomk/qmomk_initial_conditions.o model/qmomk/qmomk_make_arrays.o model/qmomk/qmomk_parameters_mod.o model/qmomk/qmomk_quadrature_mod.o model/qmomk/qmomk_read_restart.o model/qmomk/qmomk_set_bc.o model/qmomk/qmomk_time_march.o model/qmomk/qmomk_tools_mod.o model/qmomk/qmomk_write_restart.o model/radial_vel_correction.o model/rdf_mod.o model/read_database.o model/read_namelist.o model/read_res1.o model/reinitialize.o model/remove_comment.o model/reset_new.o model/residual_mod.o model/rrates.o model/rrates0.o model/rrates_init.o model/run_mod.o model/rxn_com_mod.o model/rxns_mod.o model/scalar_prop.o model/scalars_mod.o model/scales_mod.o model/set_bc0.o model/set_bc1.o model/set_bc_flow.o model/set_constants.o model/set_constprop.o model/set_flags.o model/set_fluidbed_p.o model/set_geometry.o model/set_geometry1.o model/set_ic.o model/set_icbc_flags.o model/set_increments.o model/set_increments3.o model/set_index1.o model/set_index1a.o model/set_index1a3.o model/set_l_scale.o model/set_max2.o model/set_mw_mix_g.o model/set_outflow.o model/set_param.o model/set_ps.o model/set_ro_g.o model/set_ro_s.o model/set_wall_bc.o model/shift_dxyz.o model/solids_pressure_mod.o model/solve_continuity.o model/solve_energy_eq.o model/solve_epp.o model/solve_granular_energy.o model/solve_k_epsilon_eq.o model/solve_lin_eq.o model/solve_pp_g.o model/solve_scalar_eq.o model/solve_species_eq.o model/solve_vel_star.o model/source_granular_energy.o model/source_phi.o model/source_pp_g.o model/source_rop_g.o model/source_rop_s.o model/source_u_g.o model/source_u_s.o model/source_v_g.o model/source_v_s.o model/source_w_g.o model/source_w_s.o model/tau_g_mod.o model/tau_s_mod.o model/tau_u_g.o model/tau_u_s.o model/tau_v_g.o model/tau_v_s.o model/tau_w_g.o model/tau_w_s.o model/test_lin_eq.o model/thermochemical/get_values.o model/thermochemical/read_thermochemical_mod.o model/time_cpu_mod.o model/time_march.o model/tmp_array1_mod.o model/tmp_array_mod.o model/toleranc_mod.o model/trace_mod.o model/transfer.o model/transport_prop.o model/turb_mod.o model/undef_2_0.o model/under_relax.o model/update_old.o model/ur_facs_mod.o model/usr0.o model/usr1.o model/usr2.o model/usr3.o model/usr_drag.o model/usr_init_namelist.o model/usr_mod.o model/usr_physical_prop.o model/usr_rates.o model/usr_write_out0.o model/usr_write_out1.o model/utilities_mod.o model/vavg_u_g.o model/vavg_u_s.o model/vavg_v_g.o model/vavg_v_s.o model/vavg_w_g.o model/vavg_w_s.o model/vf_gs_x.o model/vf_gs_y.o model/vf_gs_z.o model/visc_g_mod.o model/visc_s_mod.o model/vshear_mod.o model/vtc_scalar.o model/write_ab_m.o model/write_ab_m_var.o model/write_error.o model/write_header.o model/write_out0.o model/write_out1.o model/write_out3.o model/write_res0.o model/write_res1.o model/write_spx0.o model/write_spx1.o model/write_table.o model/write_usr0.o model/write_usr1.o model/xerbla.o model/xsi_array_mod.o model/xsi_mod.o model/zero_array.o model/zero_norm_vel.o model/MFIXinterface.o FWrapper.o  
ranlib libmfix.a
#mpif90  -g -O2   -DMPI  -o mfix model/mfix.o libmfix.a 

mpic++ -c "-std=c++11" CWrapper.cpp -I/home/vkotteda/Software/Trilinos/install/include 

mpif90 -O3 -DMPI  -o mfixnew model/mfix.o  FWrapper.o  CWrapper.o  FWrapper_ext.o libmfix.a -L/home/vkotteda/Software/Trilinos/install/lib -I/home/vkotteda/Software/Trilinos/install/include -lpiro -lrol -lstokhos_muelu -lstokhos_ifpack2 -lstokhos_amesos2 -lstokhos_tpetra -lstokhos_sacado -lstokhos -lrythmos -lmuelu-adapters -lmuelu-interface -lmuelu -llocathyra -llocaepetra -llocalapack -lloca -lnoxepetra -lnoxlapack -lnox -lintrepid -lteko -lstratimikos -lstratimikosbelos -lstratimikosaztecoo -lstratimikosamesos -lstratimikosml -lstratimikosifpack -lifpack2-adapters -lifpack2 -lanasazitpetra -lModeLaplace -lanasaziepetra -lanasazi -lIonit -lIotr -lIohb -lIogn -lIopg -lIoexo_fac -lIofx -lIoex -lIoss -lexodus -lIonit -lIotr -lIohb -lIogn -lIopg -lIoexo_fac -lIofx -lIoex -lIoss -lexodus -lamesos2 -lbelostpetra -lbelosepetra -lbelos -lml -lifpack -lzoltan2 -lpamgen_extras -lpamgen -lamesos -lgaleri-xpetra -lgaleri-epetra -laztecoo -lisorropia -loptipack -lxpetra-sup -lxpetra -lthyratpetra -lthyraepetraext -lthyraepetra -lthyracore -lthyratpetra -lthyraepetraext -lthyraepetra -lthyracore -lepetraext -ltpetraext -ltpetrainout -ltpetra -lkokkostsqr -ltpetrakernels -ltpetraclassiclinalg -ltpetraclassicnodeapi -ltpetraclassic -ltpetraext -ltpetrainout -ltpetra -lkokkostsqr -ltpetrakernels -ltpetraclassiclinalg -ltpetraclassicnodeapi -ltpetraclassic -ltriutils -lglobipack -lshards -lzoltan -lepetra -lsacado -lrtop -lteuchoskokkoscomm -lteuchoskokkoscompat -lteuchosremainder -lteuchosnumerics -lteuchoscomm -lteuchosparameterlist -lteuchoscore -lteuchoskokkoscomm -lteuchoskokkoscompat -lteuchosremainder -lteuchosnumerics -lteuchoscomm -lteuchosparameterlist -lteuchoscore -lkokkosalgorithms -lkokkoscontainers -lkokkoscore -lkokkosalgorithms -lkokkoscontainers -lkokkoscore /home/vkotteda/Software/lapack/install/lib/liblapack.so /home/vkotteda/Software/lapack/install/lib/libblas.so -I$parmetis/include $parmetis/lib/libparmetis.a $parmetis/lib/libmetis.a -lstdc++ 

#mpif90  -g -O3   -DMPI   -o mfix model/mfix.o model/read_database.o model/read_namelist.o libmfix.a 
